<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="radix" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

  <!--radix_placeholder_meta_tags-->
  <title>Dockerize a ShinyApp and host it on your own server with DigitalOcean</title>
  
  <meta property="description" itemprop="description" content="How I managed to deploy my ShinyApp with Docker and host it on a web server with DigitalOcean."/>
  
  
  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2019-03-16"/>
  <meta property="article:created" itemprop="dateCreated" content="2019-03-16"/>
  <meta name="article:author" content="Hause Lin"/>
  
  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="Dockerize a ShinyApp and host it on your own server with DigitalOcean"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="How I managed to deploy my ShinyApp with Docker and host it on a web server with DigitalOcean."/>
  <meta property="og:locale" content="en_US"/>
  
  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="Dockerize a ShinyApp and host it on your own server with DigitalOcean"/>
  <meta property="twitter:description" content="How I managed to deploy my ShinyApp with Docker and host it on a web server with DigitalOcean."/>
  
  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","preview","author","date","output","draft","categories","repository_url","editor_options"]}},"value":[{"type":"character","attributes":{},"value":["Dockerize a ShinyApp and host it on your own server with DigitalOcean"]},{"type":"character","attributes":{},"value":["How I managed to deploy my ShinyApp with Docker and host it on a web server with DigitalOcean. \n"]},{"type":"character","attributes":{},"value":["https://raw.githubusercontent.com/hauselin/rtutorialsite/master/docs/attachments/dockerShinyDigitalOcean.jpg"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name"]}},"value":[{"type":"character","attributes":{},"value":["Hause Lin"]}]}]},{"type":"character","attributes":{},"value":["03-16-2019"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["radix::radix_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["toc","self_contained"]}},"value":[{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[false]}]}]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["shinyapp","docker","digitalocean","webserver"]},{"type":"character","attributes":{},"value":["https://github.com/hauselin/rtutorialsite/blob/master/_posts/2019-03-17-dockerize-a-shinyapp-and-host-it-on-your-own-server-with-digitalocean/dockerize-a-shinyapp-and-host-it-on-your-own-server-with-digitalocean.Rmd"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["chunk_output_type"]}},"value":[{"type":"character","attributes":{},"value":["console"]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["dockerize-a-shinyapp-and-host-it-on-your-own-server-with-digitalocean_files/bowser-1.9.3/bowser.min.js","dockerize-a-shinyapp-and-host-it-on-your-own-server-with-digitalocean_files/distill-2.2.21/template.v2.js","dockerize-a-shinyapp-and-host-it-on-your-own-server-with-digitalocean_files/jquery-1.11.3/jquery.min.js","dockerize-a-shinyapp-and-host-it-on-your-own-server-with-digitalocean_files/webcomponents-2.0.0/webcomponents.js"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->
  
  <style type="text/css">
  
  body {
    background-color: white;
  }
  
  .pandoc-table {
    width: 100%;
  }
  
  .pandoc-table>caption {
    margin-bottom: 10px;
  }
  
  .pandoc-table th:not([align]) {
    text-align: left;
  }
  
  .pagedtable-footer {
    font-size: 15px;
  }
  
  .html-widget {
    margin-bottom: 2.0em;
  }
  
  .l-screen-inset {
    padding-right: 16px;
  }
  
  .l-screen .caption {
    margin-left: 10px;
  }
  
  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .shaded .shaded-content {
    background: white;
  }
  
  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }
  
  .hidden {
    display: none !important;
  }
  
  d-article {
    padding-bottom: 30px;
  }
  
  d-appendix {
    padding-top: 30px;
  }
  
  d-article>p>img {
    width: 100%;
  }
  
  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }
  
  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }
  
  /* CSS for table of contents */
  
  .d-toc {
    color: rgba(0,0,0,0.8);
    font-size: 0.8em;
    line-height: 1em;
  }
  
  .d-toc-header {
    font-size: 0.6rem;
    font-weight: 400;
    color: rgba(0, 0, 0, 0.5);
    text-transform: uppercase;
    margin-top: 0;
    margin-bottom: 1.3em;
  }
  
  .d-toc a {
    border-bottom: none;
  }
  
  .d-toc ul {
    padding-left: 0;
  }
  
  .d-toc li>ul {
    padding-top: 0.8em;
    padding-left: 16px;
    margin-bottom: 0.6em;
  }
  
  .d-toc ul,
  .d-toc li {
    list-style-type: none;
  }
  
  .d-toc li {
    margin-bottom: 0.9em;
  }
  
  .d-toc-separator {
    margin-top: 20px;
    margin-bottom: 2em;
  }
  
  .d-article-with-toc {
    border-top: none;
    padding-top: 0;
  }
  
  
  
  /* Tweak code blocks (note that this CSS is repeated above in an injection
     into the d-code shadow dom) */
  
  d-code {
    overflow-x: auto !important;
  }
  
  pre.d-code code.d-code {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }
  
  pre.text-output {
  
    font-size: 12px;
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;
  
    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;
  
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }
  
  @media(min-width: 768px) {
  
  d-code {
    overflow-x: visible !important;
  }
  
  pre.d-code code.d-code  {
      padding-left: 18px;
      font-size: 14px;
  }
  pre.text-output {
    font-size: 14px;
  }
  }
  
  /* Figure */
  
  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }
  
  .figure img {
    width: 100%;
  }
  
  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }
  
  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }
  
  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }
  
  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }
  
  
  
  /* Tweak 1000px media break to show more text */
  
  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }
  
    .grid {
      grid-column-gap: 16px;
    }
  
    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }
  
  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }
  
    .grid {
      grid-column-gap: 32px;
    }
  }
  
  
  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */
  
  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }
  
  
  /* Social footer */
  
  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }
  
  .disqus-comments {
    margin-right: 30px;
  }
  
  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }
  
  #disqus_thread {
    margin-top: 30px;
  }
  
  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }
  
  .article-sharing a:hover {
    border-bottom: none;
  }
  
  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }
  
  .subscribe p {
    margin-bottom: 0.5em;
  }
  
  
  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }
  
  
  /* Improve display for browsers without grid (IE/Edge <= 15) */
  
  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }
  
  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }
  
  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }
  
  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }
  
  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }
  
  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }
  
  
  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }
  
  .downlevel .footnotes ol {
    padding-left: 13px;
  }
  
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }
  
  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }
  
  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }
  
  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;
  
    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;
  
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }
  
  </style>
  
  <script type="application/javascript">
  
  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }
  
  // show body when load is complete
  function on_load_complete() {
  
    // set body to visible
    document.body.style.visibility = 'visible';
  
    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }
  
    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }
  
  function init_distill() {
  
    init_common();
  
    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);
  
    // create d-title
    $('.d-title').changeElementType('d-title');
  
    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);
  
    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();
  
    // move posts container into article
    $('.posts-container').appendTo($('d-article'));
  
    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');
  
    // create d-bibliography
    var bibliography = $('<d-bibliography></d-bibliography>');
    $('#distill-bibliography').wrap(bibliography);
  
    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;
  
    // replace citations with <d-cite>
    $('.citation').each(function(i, val) {
      appendix = true;
      var cites = $(this).attr('data-cites').split(" ");
      var dt_cite = $('<d-cite></d-cite>');
      dt_cite.attr('key', cites.join());
      $(this).replaceWith(dt_cite);
    });
    // remove refs
    $('#refs').remove();
  
    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();
  
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-toc a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });
  
    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');
  
    // replace code blocks with d-code
    $('pre>code').each(function(i, val) {
      var code = $(this);
      var pre = code.parent();
      var clz = "";
      var language = pre.attr('class');
      if (language) {
        // map unknown languages to "clike" (without this they just dissapear)
        if ($.inArray(language, ["bash", "clike", "css", "go", "html",
                                 "javascript", "js", "julia", "lua", "markdown",
                                 "markup", "mathml", "python", "svg", "xml"]) == -1)
          language = "clike";
        language = ' language="' + language + '"';
        var dt_code = $('<d-code block' + language + clz + '></d-code>');
        dt_code.text(code.text());
        pre.replaceWith(dt_code);
      } else {
        code.addClass('text-output').unwrap().changeElementType('pre');
      }
    });
  
    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {
  
      // capture layout
      var layout = $(this).attr('data-layout');
  
      // apply layout to markdown level block elements
      var elements = $(this).children().not('d-code, pre.text-output, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });
  
  
      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });
  
    // load distill framework
    load_distill_framework();
  
    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {
  
      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;
  
      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');
  
      // table of contents
      if (have_authors) // adjust border if we are in authors
        $('.d-toc').parent().addClass('d-article-with-toc');
  
      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');
  
      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }
  
      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');
  
      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");
  
      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }
  
       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }
  
      // inject pre code styles (can't do this with a global stylesheet b/c a shadow root is used)
      $('d-code').each(function(i, val) {
        var style = document.createElement('style');
        style.innerHTML = 'pre code { padding-left: 10px; font-size: 12px; border-left: 2px solid rgba(0,0,0,0.1); } ' +
                          '@media(min-width: 768px) { pre code { padding-left: 18px; font-size: 14px; } }';
        if (this.shadowRoot)
          this.shadowRoot.appendChild(style);
      });
  
      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();
  
      // clear polling timer
      clearInterval(tid);
  
      // show body now that everything is ready
      on_load_complete();
    }
  
    var tid = setInterval(distill_post_process, 50);
    distill_post_process();
  
  }
  
  function init_downlevel() {
  
    init_common();
  
     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));
  
    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
  
    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();
  
    // remove toc
    $('.d-toc-header').remove();
    $('.d-toc').remove();
    $('.d-toc-separator').remove();
  
    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });
  
  
    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);
  
    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);
  
    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();
  
    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();
  
    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));
  
    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });
  
    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));
  
    $('body').addClass('downlevel');
  
    on_load_complete();
  }
  
  
  function init_common() {
  
    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};
  
        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });
  
        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);
  
    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});
  
    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });
  
      }
    });
  
    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });
  
    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.radix-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }
  
    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');
  
    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");
  
    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();
  
    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }
  
  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });
  
  </script>
  
  <!--/radix_placeholder_distill-->
  <script src="dockerize-a-shinyapp-and-host-it-on-your-own-server-with-digitalocean_files/jquery-1.11.3/jquery.min.js"></script>
  <script src="dockerize-a-shinyapp-and-host-it-on-your-own-server-with-digitalocean_files/bowser-1.9.3/bowser.min.js"></script>
  <script src="dockerize-a-shinyapp-and-host-it-on-your-own-server-with-digitalocean_files/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="dockerize-a-shinyapp-and-host-it-on-your-own-server-with-digitalocean_files/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Dockerize a ShinyApp and host it on your own server with DigitalOcean","description":"How I managed to deploy my ShinyApp with Docker and host it on a web server with DigitalOcean.","authors":[{"author":"Hause Lin","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#"}],"publishedDate":"2019-03-16T00:00:00.000+01:00","citationText":"Lin, 2019"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Dockerize a ShinyApp and host it on your own server with DigitalOcean</h1>
<p>How I managed to deploy my ShinyApp with Docker and host it on a web server with DigitalOcean.</p>
</div>

<div class="d-byline">
  Hause Lin  
  
<br/>03-16-2019
</div>

<div class="d-article">
<h3 class="d-toc-header">Table of Contents</h3>
<nav class="d-toc" id="TOC">
<ul>
<li><a href="#hosting-a-shinyapp-on-your-own-websitedomain-with-docker-and-digitalocean">Hosting a ShinyApp on your own website/domain with Docker and DigitalOcean</a></li>
<li><a href="#step-1.-create-your-shinyapp">Step 1. Create your ShinyApp</a></li>
<li><a href="#step-2.-dockerize-your-shinyapp-and-rstudio-server">Step 2. Dockerize your ShinyApp and RStudio Server</a></li>
<li><a href="#step-3.-sign-up-to-digitalocean-to-get-a-private-server">Step 3. Sign up to DigitalOcean to get a private server</a></li>
<li><a href="#step-4.-transfer-your-docker-tar-archive-image-to-your-digitalocean-droplet">Step 4. Transfer your Docker tar-archive image to your DigitalOcean droplet</a></li>
<li><a href="#step-5.-load-your-docker-image-on-droplet-and-run-your-app-on-our-server">Step 5. Load your Docker image on droplet and run your app on our server!</a></li>
<li><a href="#step-6.-optional-but-recommended-get-a-nice-domain-name-url-for-your-droplet">Step 6. (optional but recommended): Get a nice domain name (“URL”) for your droplet</a></li>
</ul>
</nav>
<hr class="d-toc-separator"/>
<h2 id="hosting-a-shinyapp-on-your-own-websitedomain-with-docker-and-digitalocean">Hosting a ShinyApp on your own website/domain with Docker and DigitalOcean</h2>
<p>After much fiddling, I managed to dockerize my <a href="http://escal.site/">effect size converter ShinyApp</a> and hosted it on my own web server with <a href="https://m.do.co/c/a32d79a17aa9">DigitalOcean</a>, which is cheaper, faster, and more flexible than <a href="http://shinyapps.io/">shinyapps.io</a>. Below are the exact steps I took and solutions to problems I ran into along the way. Note that I did everything on <strong>Mac OS X</strong>, so I won’t promise everything will work if you use other operating systems! I’ve provided the links to the key resources I used at each step.</p>
<h2 id="step-1.-create-your-shinyapp">Step 1. Create your ShinyApp</h2>
<p>In RStudio, create a new project via File -&gt; New Project -&gt; New Directory -&gt; Shiny Web Application. RStudio will create a ShinyApp project and directory that comes with a really simple ShinyApp (<code>app.R</code> which you can run by press Run App), which you can play with and edit to create your own ShinyApp.</p>
<ul>
<li><a href="https://www.datacamp.com/tracks/shiny-fundamentals-with-r">DataCamp course: Building Web Applications in R with Shiny</a></li>
</ul>
<h2 id="step-2.-dockerize-your-shinyapp-and-rstudio-server">Step 2. Dockerize your ShinyApp and RStudio Server</h2>
<p>If you deploy (or run) your ShinyApp with Docker, you’re making your app self-contained, which means anyone can run your app even if they don’t have R or RStudio, as long as they have Docker installed. When you later host your app on a web server with DigitalOcean, we’ll simply upload this Docker image or container of your app to your web server. I followed the instructions on this site (steps summarized below): <a href="https://www.bjoern-hartmann.de/post/learn-how-to-dockerize-a-shinyapp-in-7-steps/#step-7-transfer-the-shinyapp-to-a-web-server-and-deploy-it-online">Learn how to dockerize a ShinyApp in 7 steps</a></p>
<ol type="1">
<li><p>Install Docker by downloading the free Docker Engine for your machine via <a href="docker.com">docker.com</a></p></li>
<li><p>Create a new directory/folder (I’ve named it <code>myApp_docker</code>) and copy over all the files, scripts, and data that are required to run your ShinyApp into the folder <code>app</code> inside the <code>myApp_docker</code> directory. A really simple directory structure should look like the one below. After copying things over and setting up this directory, make sure you can run your ShinyApp from this directory.</p></li>
</ol>
<pre><code>
myApp_docker
  - app
    - app.R</code></pre>
<ol start="3" type="1">
<li>Create a Dockerfile, which tells Docker what to install (and in what order) to make a self-contained ShinyApp. You can download, edit, and use my <a href="https://raw.githubusercontent.com/hauselin/rtutorialsite/master/docs/attachments/Dockerfile">example Dockerfile</a>. You can specify which R version you want to install on line 2. Depending on what R packages you need, you’ll have to modify line 24 accordingly. When I created my Dockerfile, I ran into issues with permissions later on and I fixed it by adding the following lines (lines 36 to 38) in my Dockerfile.</li>
</ol>
<pre><code>
# Permission
# see https://github.com/rocker-org/shiny/issues/32
RUN [&quot;chmod&quot;, &quot;+x&quot;, &quot;/usr/bin/shiny-server.sh&quot;]</code></pre>
<ol start="4" type="1">
<li>Add the Dockerfile and the shiny-server.conf and shiny-server.sh files to your <code>myApp_docker</code> directory. Follow instructions and download the files from <a href="https://www.bjoern-hartmann.de/post/learn-how-to-dockerize-a-shinyapp-in-7-steps/#step-4-add-configuration-files-for-your-shinyapp">here</a>. Your directory should look like this now:</li>
</ol>
<pre><code>
myApp_docker
  - Dockerfile
  - shiny-server.conf
  - shiny-server.sh
  - app
    - app.R</code></pre>
<ol start="5" type="1">
<li><p>Build the docker image. In terminal (bash), navigate to your <code>myApp_docker</code> directory and run <code>docker build -t myApp_docker .</code> You can name the Docker image whatever you like (it’s <code>myApp_docker</code> here, so the directory and Docker image name are identical).</p></li>
<li><p>Test run your Docker image by running your ShinyApp locally with Docker. In terminal/bash, run <code>docker run -p 80:80 myApp_docker</code> which starts your myApp_docker Docker image. When the image is running, go to your web browser and you can navigate to <a href="http://localhost">http://localhost</a> to run your app. If it works, congrats on creating a self-contained Docker image of your ShinyApp! Make sure your app runs before you continue!</p></li>
<li><p>Save your Docker image as a tar-archive so you can upload it to a web server later on. Run <code>docker save -o myApp_docker.tar myApp_docker</code> which saves your Docker image as a tar-acrhive in your current directory (myApp_docker). Depending on the size of your image (about 1GB for my image), this command might take some time to run.</p></li>
</ol>
<h2 id="step-3.-sign-up-to-digitalocean-to-get-a-private-server">Step 3. Sign up to DigitalOcean to get a private server</h2>
<p>Go to <a href="https://m.do.co/c/a32d79a17aa9">DigitalOcean</a> (use this link to get 2 months free and credits!) then follow steps 1 to 4 on <a href="https://deanattali.com/2015/05/09/setup-rstudio-shiny-server-digital-ocean/">this site</a>, which are summarized below.</p>
<ol type="1">
<li><p>Sign up to DigitalOcean.</p></li>
<li><p>Create a new droplet by choosing the smallest/cheapest machine ($5/month plan), which is often more than enough for simple ShinyApps. I chose New York for region because it’s closest to me.</p></li>
</ol>
<aside>
I accidentally selected FrankFurt initially (because I created the droplet when I was in Europe) and I ran into issues logging in with ssh, which I couldn’t fix. But when I recreated my droplet by selecting New York region, the problem fixed itself!
</aside>
<ol start="3" type="1">
<li><p>Log in to your new server with your droplet’s IP address (I’m going to use <code>xxx.xxx.xxx.xx</code> here). You can either log in via the Access tab (Launch Console) on the droplet’s page or via ssh if you’re on a unix machine. On my machine, I ran this in termal: <code>ssh root@xxx.xxx.xxx.xx</code>. It will ask for your password, which has been emailed to you when you created your droplet earlier on. Enter that password and it might ask you to change your default password.</p></li>
<li><p>Add a user (my name <code>hause</code> in this example) to your server so you don’t use the root account. Run <code>adduser hause</code> and then <code>gpasswd -a hause sudo</code>. It might ask you to provide a password for this new account. Now, you can log in to this account instead of root. Try running <code>exit</code> to leave your server and then log in again but using <code>ssh hause@xxx.xxx.xxx.xx</code>. You should now be in your new account rather than root!</p></li>
</ol>
<h2 id="step-4.-transfer-your-docker-tar-archive-image-to-your-digitalocean-droplet">Step 4. Transfer your Docker tar-archive image to your DigitalOcean droplet</h2>
<p>You’re getting there! Now you have to transfer your Docker tar-archive image to your DigitalOcean droplet. Use <code>rsync</code> or any FTP service you usually use (e.g., CyberDuck; I use <a href="https://binarynights.com/">ForkLift</a> on my Mac). If you use <code>rsync</code>, you can run the following: <code>rsync -av myApp_docker.tar hause@xxx.xxx.xxx.xx</code> to copy your Docker tar-archive to your droplet. It might take some time to transfer, depending on the size of your tar-achive and your internet connection.</p>
<h2 id="step-5.-load-your-docker-image-on-droplet-and-run-your-app-on-our-server">Step 5. Load your Docker image on droplet and run your app on our server!</h2>
<p>Finally you’re at the last step! When your Docker tar-archive is on your droplet, you first load it by running <code>docker load -i myApp_docker.tar</code> and then run it with <code>docker run -d -p 80:80 myApp_docker</code> (-d or –detach tells the droplet to run the docker image in the background; see <a href="http://networkstatic.net/running-docker-machine-on-digital-ocean/">here</a> for more info). See <a href="http://networkstatic.net/docker-one-liners/">here</a> for Docker one-liner tutorial! If everything is working properly, if you go to your web browser and enter your droplet IP address (<a href="http://xxx.xxx.xxx.xx" class="uri">http://xxx.xxx.xxx.xx</a>), your ShinyApp should be working! Congrats!</p>
<h2 id="step-6.-optional-but-recommended-get-a-nice-domain-name-url-for-your-droplet">Step 6. (optional but recommended): Get a nice domain name (“URL”) for your droplet</h2>
<p>I use <a href="http://namecheap.com/">NameCheap</a> to buy the domain <a href="escal.site">escal.site</a> for my ShinyApp. After buying your domain, point your droplet IP address to your domain by following the instructions <a href="https://www.howlthemes.com/point-domain-name-digitalocean-droplet/">here</a>, which are summarized below.</p>
<ol type="1">
<li>Manage your domain on NameCheap and search for an option called DNS (Domain Server Name) or just nameServer. Select custom DNS and add the following three nameservers. Then click the green checkmark. DigitalOcean also provides <a href="https://www.digitalocean.com/community/tutorials/how-to-point-to-digitalocean-nameservers-from-common-domain-registrars#registrar-namecheap">good tutorials</a>. It might take between 10 mins and 24 hours for the name server changes to take effect.</li>
</ol>
<pre><code>
ns1.digitalocean.com
ns2.digitalocean.com
ns3.digitalocean.com</code></pre>
<ol start="2" type="1">
<li>Point your droplet IP to your domain name. Go to your DigitalOcean account and select Networking from the menu. Under “Add a domain”, enter your new domain name (escal.site in my case) and tell it which droplet or project you want to point to. Then manage this domain by creating new records. Create an “A” type to point your droplet IP to your domain name. Create a “CNAME” type to point one URL to another URL (e.g., www.escal.site also points to escal.site in my case). See <a href="https://www.howlthemes.com/point-domain-name-digitalocean-droplet/">here</a> and <a href="https://www.digitalocean.com/docs/networking/dns/how-to/manage-records/">here</a> for more instructions.</li>
</ol>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
<h3 id="updates-and-corrections">Corrections</h3>
<p>If you see mistakes or want to suggest changes, please <a href="https://github.com/hauselin/rtutorialsite/blob/master/_posts/2019-03-17-dockerize-a-shinyapp-and-host-it-on-your-own-server-with-digitalocean/dockerize-a-shinyapp-and-host-it-on-your-own-server-with-digitalocean.Rmd/issues/new">create an issue</a> on the source repository.</p>
</div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
